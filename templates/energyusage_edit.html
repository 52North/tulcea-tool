<!DOCTYPE html>
<html>
  <head>
    <title>{{^id}}Add{{/id}}{{#id}}Edit{{/id}} energy usage</title>
    {{>head}}
  </head>
  <body>
    <div data-role="page">
      <div data-role="header">
        {{>home}}
        <h1>{{^id}}Add{{/id}}{{#id}}Edit{{/id}} energy usage</h1>
        {{#id}}
        {{#page_config.can_delete}}
        <form action="{{svc}}/energyusages/{{id}}" method="post" data-ajax="false"
          data-wq-json="true" data-wq-background-sync="false"
          onsubmit="return require('wq/app').confirmSubmit(this, 'Are you sure you want to delete this record?');">
          {{>csrf}}
          <input type=hidden name="_method" value="DELETE">
          <button type="submit" data-icon="delete" class="ui-btn-right">
            Delete
          </button>
        </form>
        {{/page_config.can_delete}}
        {{/id}}
      </div>
      {{>navbar}}
      <div role="main" class="ui-content">
        <form action="{{svc}}/energyusages/{{id}}" method="post" data-ajax="false"
            data-wq-json="true"
            {{#outbox_id}}
              data-wq-outbox-id="{{outbox_id}}"
              data-wq-outbox-preserve=""
            {{/outbox_id}}>
          {{>csrf}}
          {{#id}}
          <input type=hidden name="_method" value="PUT">
          {{/id}}
          <ul data-role="listview" data-inset="true">
            <li class="ui-field-contain">
              <fieldset data-xform-type='select one' data-role='controlgroup' data-type='vertical'>
                <legend>What type of energy do you use?</legend>
                {{#energy_type_choices}}
                <input type='radio' id='energyusage-energy_type-{{name}}' class="wq-hide" name='energy_type' value='{{name}}'{{#selected}} checked{{/selected}}>
                <label for='energyusage-energy_type-{{name}}'>{{{label}}}</label>
                {{/energy_type_choices}}
              </fieldset>
              <p class='error energyusage-energy_type-errors'></p>
            </li>
            <li class="ui-field-contain">
              <fieldset data-xform-type='select one' data-role='controlgroup' data-type='vertical'>
                <legend>Would you like to use more renewable energy?</legend>
                {{#more_renewable_choices}}
                <input type='radio' id='energyusage-more_renewable-{{name}}' name='more_renewable' value='{{name}}'{{#selected}} checked{{/selected}}>
                <label for='energyusage-more_renewable-{{name}}'>{{{label}}}</label>
                {{/more_renewable_choices}}
              </fieldset>
              <p class='error energyusage-more_renewable-errors'></p>
            </li>
            <li class="ui-field-contain wq-renewable-hide" style="display: none;">
              <fieldset data-xform-type='select one' data-role='controlgroup'>
                <legend>What type of renewable energy do you use?</legend>
                {{#renewable_type_choices}}
                <input type='radio' id='energyusage-renewable_type-{{name}}' name='renewable_type' value='{{name}}'{{#selected}} checked{{/selected}}>
                <label for='energyusage-renewable_type-{{name}}'>{{{label}}}</label>
                {{/renewable_type_choices}}
              </fieldset>
              <p class='error energyusage-renewable_type-errors'></p>
            </li>
            <li data-xform-type='note' class="wq-renewable-hide" style="display: none;">
              <p class="label">Please add the location of the renewable energy source that you use. <br> <br> You can choose between three options for setting the location. In the first option, the location is taken from the gps of your device (if available).
                As second option, you can click on the map below, and as third option you can insert the latitude and longitude directly in the fields below. The last option is only recommended for experienced users.</p>
            </li>
            <li class="ui-field-contain wq-renewable-hide" style="display: none;">
              <fieldset data-xform-type='select one' data-role='controlgroup' data-type='vertical'>
                <legend>Location Mode</legend>
                {{#toggle_choices}}
                <input type='radio' id='energyusage-toggle-{{name}}' name='toggle' value='{{name}}'{{#selected}} checked{{/selected}}>
                <label for='energyusage-toggle-{{name}}'>{{{label}}}</label>
                {{/toggle_choices}}
              </fieldset>
              <p class='error energyusage-toggle-errors'></p>
            </li>
            <li>
              <label for='energyusage-geometry'>Location</label>
              <input type='hidden' data-xform-type='geopoint' name='geometry'>
              <div class="map edit-map" id='energyusage-{{id}}{{^id}}new{{/id}}-edit-map'></div>
              <p class='error energyusage-geometry-errors'></p>
            </li>
            <li class="ui-field-contain wq-renewable-hide" style="display: none;">
              <label for='energyusage-latitude'>Latitude</label>
              <input id='energyusage-latitude' type='number' data-xform-type='decimal' name='latitude' step='0.000001' value="{{latitude}}">
              <p class='error energyusage-latitude-errors'></p>
            </li>
            <li class="ui-field-contain wq-renewable-hide" style="display: none;">
              <label for='energyusage-longitude'>Longitude</label>
              <input id='energyusage-longitude' type='number' data-xform-type='decimal' name='longitude' step='0.000001' value="{{longitude}}">
              <p class='error energyusage-longitude-errors'></p>
            </li>
            <li class="ui-field-contain wq-renewable-hide" style="display: none;">
              <label for='energyusage-accuracy'>GPS Accuracy</label>
              <input id='energyusage-accuracy' type='number' data-xform-type='decimal' name='accuracy' step='0.000001' value="{{accuracy}}">
              <p class='error energyusage-accuracy-errors'></p>
            </li>
            <li>
              <div class="ui-grid-b">
                <div class="ui-block-a">
                  <a href="{{rt}}/" data-role="button" data-icon="back" data-direction="reverse">
                    Home
                  </a>
                </div>
                <div class="ui-block-b">
                  <a href="{{rt}}/energyusages/" data-role="button" data-icon="back" data-direction="reverse">
                    Show energy usages
                  </a>
                </div>
                <div class="ui-block-c">
                  <button type="submit" data-icon="check" data-theme="b">
                    Submit
                  </button>
                </div>
              </div>
              <p class="error energyusage-errors"></p>
            </li>
          </ul>
        </form>
      </div>
      {{>footer}}
    </div>
  </body>
</html>
